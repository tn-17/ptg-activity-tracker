import{Z as P,a2 as he,a8 as O,x as B,av as _e,a3 as ve,c as q,e as we,a5 as Ie,a6 as De,a7 as Q,a9 as F,$ as T,ak as Ee,aD as Se,ao as ee,V as ke,aW as _,_ as Y,a1 as Ae,ah as ne,v as Me,aB as J,aM as Le,aX as Be,aY as Ne,aZ as Te,W as ce,Y as le,a_ as V,ax as Ce,aA as xe,X as Re,a$ as ue,z as je,b0 as Pe}from"./QHsq6-My.js";function Oe(e,n,t){for(var o=[],r=n.length,a,i=n.length,u=0;u<r;u++){let y=n[u];le(y,()=>{if(a){if(a.pending.delete(y),a.done.add(y),a.pending.size===0){var g=e.outrogroups;G(J(a.done)),g.delete(a),g.size===0&&(e.outrogroups=null)}}else i-=1},!1)}if(i===0){var s=o.length===0&&t!==null;if(s){var f=t,l=f.parentNode;xe(l),l.append(f),e.items.clear()}G(n,!s)}else a={pending:new Set(n),done:new Set},(e.outrogroups??=new Set).add(a)}function G(e,n=!0){for(var t=0;t<e.length;t++)Re(e[t],n)}var te;function un(e,n,t,o,r,a=null){var i=e,u=new Map,s=(n&ue)!==0;if(s){var f=e;i=B?O(_e(f)):f.appendChild(P())}B&&ve();var l=null,y=we(()=>{var d=t();return Le(d)?d:d==null?[]:J(d)}),g,m=!0;function w(){c.fallback=l,Fe(c,g,i,n,o),l!==null&&(g.length===0?(l.f&_)===0?ce(l):(l.f^=_,N(l,null,i)):le(l,()=>{l=null}))}var S=he(()=>{g=q(y);var d=g.length;let k=!1;if(B){var A=Ie(i)===De;A!==(d===0)&&(i=Q(),O(i),F(!1),k=!0)}for(var h=new Set,I=ke,M=Ae(),b=0;b<d;b+=1){B&&T.nodeType===Ee&&T.data===Se&&(i=T,k=!0,F(!1));var D=g[b],L=o(D,b),p=m?null:u.get(L);p?(p.v&&ee(p.v,D),p.i&&ee(p.i,b),M&&I.skipped_effects.delete(p.e)):(p=Ve(u,m?i:te??=P(),D,L,b,r,n,t),m||(p.e.f|=_),u.set(L,p)),h.add(L)}if(d===0&&a&&!l&&(m?l=Y(()=>a(i)):(l=Y(()=>a(te??=P())),l.f|=_)),B&&d>0&&O(Q()),!m)if(M){for(const[ye,be]of u)h.has(ye)||I.skipped_effects.add(be.e);I.oncommit(w),I.ondiscard(()=>{})}else w();k&&F(!0),q(y)}),c={effect:S,items:u,outrogroups:null,fallback:l};m=!1,B&&(i=T)}function Fe(e,n,t,o,r){var a=(o&Pe)!==0,i=n.length,u=e.items,s=e.effect.first,f,l=null,y,g=[],m=[],w,S,c,d;if(a)for(d=0;d<i;d+=1)w=n[d],S=r(w,d),c=u.get(S).e,(c.f&_)===0&&(c.nodes?.a?.measure(),(y??=new Set).add(c));for(d=0;d<i;d+=1){if(w=n[d],S=r(w,d),c=u.get(S).e,e.outrogroups!==null)for(const p of e.outrogroups)p.pending.delete(c),p.done.delete(c);if((c.f&_)!==0)if(c.f^=_,c===s)N(c,null,t);else{var k=l?l.next:s;c===e.effect.last&&(e.effect.last=c.prev),c.prev&&(c.prev.next=c.next),c.next&&(c.next.prev=c.prev),v(e,l,c),v(e,c,k),N(c,k,t),l=c,g=[],m=[],s=l.next;continue}if((c.f&V)!==0&&(ce(c),a&&(c.nodes?.a?.unfix(),(y??=new Set).delete(c))),c!==s){if(f!==void 0&&f.has(c)){if(g.length<m.length){var A=m[0],h;l=A.prev;var I=g[0],M=g[g.length-1];for(h=0;h<g.length;h+=1)N(g[h],A,t);for(h=0;h<m.length;h+=1)f.delete(m[h]);v(e,I.prev,M.next),v(e,l,I),v(e,M,A),s=A,l=M,d-=1,g=[],m=[]}else f.delete(c),N(c,s,t),v(e,c.prev,c.next),v(e,c,l===null?e.effect.first:l.next),v(e,l,c),l=c;continue}for(g=[],m=[];s!==null&&s!==c;)(f??=new Set).add(s),m.push(s),s=s.next;if(s===null)continue}(c.f&_)===0&&g.push(c),l=c,s=c.next}if(e.outrogroups!==null){for(const p of e.outrogroups)p.pending.size===0&&(G(J(p.done)),e.outrogroups?.delete(p));e.outrogroups.size===0&&(e.outrogroups=null)}if(s!==null||f!==void 0){var b=[];if(f!==void 0)for(c of f)(c.f&V)===0&&b.push(c);for(;s!==null;)(s.f&V)===0&&s!==e.fallback&&b.push(s),s=s.next;var D=b.length;if(D>0){var L=(o&ue)!==0&&i===0?t:null;if(a){for(d=0;d<D;d+=1)b[d].nodes?.a?.measure();for(d=0;d<D;d+=1)b[d].nodes?.a?.fix()}Oe(e,b,L)}}a&&je(()=>{if(y!==void 0)for(c of y)c.nodes?.a?.apply()})}function Ve(e,n,t,o,r,a,i,u){var s=(i&Be)!==0?(i&Ne)===0?Me(t,!1,!1):ne(t):null,f=(i&Te)!==0?ne(r):null;return{v:s,i:f,e:Y(()=>(a(n,s??t,f??r,u),()=>{e.delete(o)}))}}function N(e,n,t){if(e.nodes)for(var o=e.nodes.start,r=e.nodes.end,a=n&&(n.f&_)===0?n.nodes.start:t;o!==null;){var i=Ce(o);if(a.before(o),o===r)return;o=i}}function v(e,n,t){n===null?e.effect.first=t:n.next=t,t===null?e.effect.last=n:t.prev=n}const H=(e,n)=>n.some(t=>e instanceof t);let oe,ie;function We(){return oe||(oe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $e(){return ie||(ie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const K=new WeakMap,W=new WeakMap,R=new WeakMap;function ze(e){const n=new Promise((t,o)=>{const r=()=>{e.removeEventListener("success",a),e.removeEventListener("error",i)},a=()=>{t(E(e.result)),r()},i=()=>{o(e.error),r()};e.addEventListener("success",a),e.addEventListener("error",i)});return R.set(n,e),n}function Ye(e){if(K.has(e))return;const n=new Promise((t,o)=>{const r=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",i),e.removeEventListener("abort",i)},a=()=>{t(),r()},i=()=>{o(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",a),e.addEventListener("error",i),e.addEventListener("abort",i)});K.set(e,n)}let U={get(e,n,t){if(e instanceof IDBTransaction){if(n==="done")return K.get(e);if(n==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return E(e[n])},set(e,n,t){return e[n]=t,!0},has(e,n){return e instanceof IDBTransaction&&(n==="done"||n==="store")?!0:n in e}};function de(e){U=e(U)}function Ge(e){return $e().includes(e)?function(...n){return e.apply(X(this),n),E(this.request)}:function(...n){return E(e.apply(X(this),n))}}function He(e){return typeof e=="function"?Ge(e):(e instanceof IDBTransaction&&Ye(e),H(e,We())?new Proxy(e,U):e)}function E(e){if(e instanceof IDBRequest)return ze(e);if(W.has(e))return W.get(e);const n=He(e);return n!==e&&(W.set(e,n),R.set(n,e)),n}const X=e=>R.get(e);function Ke(e,n,{blocked:t,upgrade:o,blocking:r,terminated:a}={}){const i=indexedDB.open(e,n),u=E(i);return o&&i.addEventListener("upgradeneeded",s=>{o(E(i.result),s.oldVersion,s.newVersion,E(i.transaction),s)}),t&&i.addEventListener("blocked",s=>t(s.oldVersion,s.newVersion,s)),u.then(s=>{a&&s.addEventListener("close",()=>a()),r&&s.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const Ue=["get","getKey","getAll","getAllKeys","count"],Xe=["put","add","delete","clear"],$=new Map;function re(e,n){if(!(e instanceof IDBDatabase&&!(n in e)&&typeof n=="string"))return;if($.get(n))return $.get(n);const t=n.replace(/FromIndex$/,""),o=n!==t,r=Xe.includes(t);if(!(t in(o?IDBIndex:IDBObjectStore).prototype)||!(r||Ue.includes(t)))return;const a=async function(i,...u){const s=this.transaction(i,r?"readwrite":"readonly");let f=s.store;return o&&(f=f.index(u.shift())),(await Promise.all([f[t](...u),r&&s.done]))[0]};return $.set(n,a),a}de(e=>({...e,get:(n,t,o)=>re(n,t)||e.get(n,t,o),has:(n,t)=>!!re(n,t)||e.has(n,t)}));const Ze=["continue","continuePrimaryKey","advance"],ae={},Z=new WeakMap,fe=new WeakMap,Je={get(e,n){if(!Ze.includes(n))return e[n];let t=ae[n];return t||(t=ae[n]=function(...o){Z.set(this,fe.get(this)[n](...o))}),t}};async function*qe(...e){let n=this;if(n instanceof IDBCursor||(n=await n.openCursor(...e)),!n)return;n=n;const t=new Proxy(n,Je);for(fe.set(t,n),R.set(t,X(n));n;)yield t,n=await(Z.get(t)||n.continue()),Z.delete(t)}function se(e,n){return n===Symbol.asyncIterator&&H(e,[IDBIndex,IDBObjectStore,IDBCursor])||n==="iterate"&&H(e,[IDBIndex,IDBObjectStore])}de(e=>({...e,get(n,t,o){return se(n,t)?qe:e.get(n,t,o)},has(n,t){return se(n,t)||e.has(n,t)}}));const C="activity-tracker",Qe=3;let z,x;function j(){return z||(z=Ke(C,Qe,{upgrade(e,n,t,o){if(!e.objectStoreNames.contains("dayLogs")){e.createObjectStore("dayLogs",{keyPath:"date"}).createIndex("by-updatedAt","updatedAt");return}const r=o.objectStore("dayLogs");r.indexNames.contains("by-updatedAt")||r.createIndex("by-updatedAt","updatedAt")},blocked(){console.warn(`IndexedDB upgrade blocked for ${C}. Close other tabs/windows.`)},blocking(){console.warn(`IndexedDB connection is blocking a newer version for ${C}. Closing.`),x?.close()},terminated(){console.warn(`IndexedDB connection terminated unexpectedly for ${C}.`)}}).then(e=>(x=e,x.onversionchange=()=>{x?.close()},e))),z}async function dn(e){const n=await j(),t=await n.get("dayLogs",e.date),o=Date.now(),r={...e,createdAt:t?.createdAt??o,updatedAt:o};return await n.put("dayLogs",r),r}async function fn(e){return(await j()).get("dayLogs",e)}async function gn(e=200){const t=(await j()).transaction("dayLogs","readonly"),r=await t.store.index("by-updatedAt").getAll(void 0,e);return await t.done,r.slice().sort((a,i)=>i.updatedAt-a.updatedAt)}async function mn(e){await(await j()).delete("dayLogs",e)}function pn(e){const n=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0");return`${n}-${t}-${o}`}function en(e){const n=new Date(e);n.setHours(0,0,0,0);const t=n.getDay();return n.setDate(n.getDate()-t),n}function yn(e){const[n,t,o]=e.split("-").map(Number),r=new Date(n,t-1,o),a=en(r),i=a.getFullYear(),u=String(a.getMonth()+1).padStart(2,"0"),s=String(a.getDate()).padStart(2,"0");return`${i}-${u}-${s}`}const nn=63,tn=45,ge=[{key:"mobility_lower_body_limber_11",label:"Lower body mobility (Limber 11)",category:"mobility",points:3,group:"Mobility"},{key:"mobility_upper_body_simple_6",label:"Upper body mobility (Simple 6)",category:"mobility",points:3,group:"Mobility"},{key:"mobility_lower_back_stretches",label:"Lower back stretches",category:"mobility",points:2,group:"Mobility"},{key:"conditioning_jumps_throws",label:"Jumps & throws",category:"conditioning",points:3,group:"Conditioning"},{key:"conditioning_easy",label:"Easy conditioning",category:"conditioning",points:5,group:"Conditioning",repeatable:!0,durationMinutes:15},{key:"conditioning_medium",label:"Medium conditioning",category:"conditioning",points:7,group:"Conditioning",repeatable:!0,durationMinutes:10},{key:"conditioning_hard",label:"Hard conditioning",category:"conditioning",points:8,group:"Conditioning",repeatable:!0,durationMinutes:5},{key:"strength_push",label:"Push",category:"strength",points:7,group:"Strength"},{key:"strength_pull",label:"Pull",category:"strength",points:7,group:"Strength"},{key:"strength_legs",label:"Legs",category:"strength",points:10,group:"Strength"},{key:"strength_abs",label:"Abs",category:"strength",points:5,group:"Strength"},{key:"strength_compression",label:"Compression",category:"strength",points:3,group:"Strength"},{key:"nutrition_omad",label:"OMAD",category:"nutrition",points:8,group:"Nutrition"},{key:"nutrition_no_carbs",label:"No carbs",category:"nutrition",points:10,group:"Nutrition"},{key:"nutrition_protein_goal",label:"Protein goal",category:"nutrition",points:3,group:"Nutrition"},{key:"nutrition_fat_goal",label:"Fat goal",category:"nutrition",points:5,group:"Nutrition"},{key:"nutrition_water_goal",label:"Water goal",category:"nutrition",points:2,group:"Nutrition"},{key:"nutrition_creatine",label:"Take creatine",category:"nutrition",points:2,group:"Nutrition"},{key:"misc_wake_up_early",label:"Wake up early",category:"miscellaneous",points:8,group:"Miscellaneous"},{key:"misc_exercise_immediately",label:"Exercise immediately after waking up",category:"miscellaneous",points:6,group:"Miscellaneous"},{key:"misc_cold_shower",label:"Cold shower for one minute",category:"miscellaneous",points:3,group:"Miscellaneous"}];function me(){return new Map(ge.map(e=>[e.key,e.points]))}function pe(){return new Map(ge.map(e=>[e.key,e.category]))}function on(e){const n={mobility:0,conditioning:0,strength:0,nutrition:0,miscellaneous:0},t=me(),o=pe();for(const[r,a]of Object.entries(e.completed)){if(!a)continue;const i=o.get(r);i&&(n[i]+=t.get(r)??0)}return n}function rn(e){const n={mobility:0,conditioning:0,strength:0,nutrition:0,miscellaneous:0},t=me(),o=pe();for(const[r,a]of Object.entries(e.counts)){const i=Number.isFinite(a)?Math.max(0,Math.floor(a)):0;if(i<=0)continue;const u=o.get(r);u&&(n[u]+=(t.get(r)??0)*i)}return n}function an(e,n){const t=n?.deload??!1,o=!!e.completed.mobility_lower_body_limber_11||!!e.completed.mobility_upper_body_simple_6,r=t?!!e.completed.strength_push||!!e.completed.strength_pull||!!e.completed.strength_legs:(!!e.completed.strength_push||!!e.completed.strength_pull)&&!!e.completed.strength_legs,a=t?(e.counts.conditioning_easy??0)>0:(e.counts.conditioning_easy??0)>0||(e.counts.conditioning_medium??0)>0||(e.counts.conditioning_hard??0)>0;return o&&r&&a}function sn(e,n){return n?e<37?"okay":e<47?"solid":e<53?"great":e<60?"amazing":"above_and_beyond":"missed"}function cn(e){return e<12?"missed":e<22?"okay":e<32?"solid":"great"}function bn(e,n){const t=on(e),o=rn(e),r={mobility:t.mobility+o.mobility,conditioning:t.conditioning+o.conditioning,strength:t.strength+o.strength,nutrition:t.nutrition+o.nutrition,miscellaneous:t.miscellaneous+o.miscellaneous},a=r.mobility+r.conditioning+r.strength,i=r.nutrition+r.miscellaneous,u=Math.min(a,nn),s=Math.min(i,tn),f=u+s,l=an(e,n),y=l,g=sn(u,l),m=cn(s);return{rawByCategory:r,cappedTrainingPoints:u,cappedLifestylePoints:s,totalPoints:f,medMet:l,dailyWin:y,trainingRating:g,lifestyleRating:m}}function hn(e){return`${e.emoji} ${e.label}`}const _n={missed:{emoji:"âŒ",label:"Missed"},okay:{emoji:"ðŸ‘",label:"Okay"},solid:{emoji:"âœ…",label:"Solid"},great:{emoji:"ðŸŒŸ",label:"Great"},amazing:{emoji:"ðŸ”¥",label:"Amazing"},above_and_beyond:{emoji:"ðŸš€",label:"Above & Beyond"}},vn={missed:{emoji:"âŒ",label:"Missed"},okay:{emoji:"ðŸ‘",label:"Okay"},solid:{emoji:"âœ…",label:"Solid"},great:{emoji:"â­",label:"Great"}},wn={needs_improvement:{emoji:"âŒ",label:"Needs improvement"},minimum:{emoji:"ðŸ‘",label:"Minimum"},solid:{emoji:"âœ…",label:"Solid"},great:{emoji:"ðŸŒŸ",label:"Great"},amazing:{emoji:"ðŸ”¥",label:"Amazing"},above_and_beyond:{emoji:"ðŸš€",label:"Above & Beyond"}},In={fatigued:{emoji:"ðŸ”´",label:"Fatigued"},normal:{emoji:"ðŸŸ¡",label:"Normal"},good:{emoji:"ðŸŸ¢",label:"Good"}};export{ge as A,vn as L,In as R,_n as T,wn as W,fn as a,bn as c,mn as d,un as e,hn as f,yn as g,pn as i,gn as l,en as s,dn as u};
