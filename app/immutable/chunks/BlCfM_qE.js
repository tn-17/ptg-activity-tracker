import{X as O,a0 as be,a6 as R,w as C,av as _e,a1 as ve,c as q,e as we,a3 as Ie,a4 as De,a5 as Q,a7 as F,Z as x,aj as Me,aD as Ee,an as ee,T as ke,aW as _,Y,$ as Se,ag as te,v as Ae,aB as G,aM as Be,aX as Ce,aY as Le,aZ as xe,U as ce,W as ue,a_ as V,ax as Te,aA as Ne,V as Pe,a$ as le,z as Oe,b0 as Re}from"./0WvxHNS7.js";function Fe(e,t,n){for(var o=[],i=t.length,s,r=t.length,l=0;l<i;l++){let m=t[l];ue(m,()=>{if(s){if(s.pending.delete(m),s.done.add(m),s.pending.size===0){var g=e.outrogroups;j(G(s.done)),g.delete(s),g.size===0&&(e.outrogroups=null)}}else r-=1},!1)}if(r===0){var a=o.length===0&&n!==null;if(a){var f=n,u=f.parentNode;Ne(u),u.append(f),e.items.clear()}j(t,!a)}else s={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(s)}function j(e,t=!0){for(var n=0;n<e.length;n++)Pe(e[n],t)}var ne;function ut(e,t,n,o,i,s=null){var r=e,l=new Map,a=(t&le)!==0;if(a){var f=e;r=C?R(_e(f)):f.appendChild(O())}C&&ve();var u=null,m=we(()=>{var d=n();return Be(d)?d:d==null?[]:G(d)}),g,p=!0;function w(){c.fallback=u,Ve(c,g,r,t,o),u!==null&&(g.length===0?(u.f&_)===0?ce(u):(u.f^=_,L(u,null,r)):ue(u,()=>{u=null}))}var E=be(()=>{g=q(m);var d=g.length;let k=!1;if(C){var S=Ie(r)===De;S!==(d===0)&&(r=Q(),R(r),F(!1),k=!0)}for(var b=new Set,I=ke,A=Se(),h=0;h<d;h+=1){C&&x.nodeType===Me&&x.data===Ee&&(r=x,k=!0,F(!1));var D=g[h],B=o(D,h),y=p?null:l.get(B);y?(y.v&&ee(y.v,D),y.i&&ee(y.i,h),A&&I.skipped_effects.delete(y.e)):(y=We(l,p?r:ne??=O(),D,B,h,i,t,n),p||(y.e.f|=_),l.set(B,y)),b.add(B)}if(d===0&&s&&!u&&(p?u=Y(()=>s(r)):(u=Y(()=>s(ne??=O())),u.f|=_)),C&&d>0&&R(Q()),!p)if(A){for(const[me,he]of l)b.has(me)||I.skipped_effects.add(he.e);I.oncommit(w),I.ondiscard(()=>{})}else w();k&&F(!0),q(m)}),c={effect:E,items:l,outrogroups:null,fallback:u};p=!1,C&&(r=x)}function Ve(e,t,n,o,i){var s=(o&Re)!==0,r=t.length,l=e.items,a=e.effect.first,f,u=null,m,g=[],p=[],w,E,c,d;if(s)for(d=0;d<r;d+=1)w=t[d],E=i(w,d),c=l.get(E).e,(c.f&_)===0&&(c.nodes?.a?.measure(),(m??=new Set).add(c));for(d=0;d<r;d+=1){if(w=t[d],E=i(w,d),c=l.get(E).e,e.outrogroups!==null)for(const y of e.outrogroups)y.pending.delete(c),y.done.delete(c);if((c.f&_)!==0)if(c.f^=_,c===a)L(c,null,n);else{var k=u?u.next:a;c===e.effect.last&&(e.effect.last=c.prev),c.prev&&(c.prev.next=c.next),c.next&&(c.next.prev=c.prev),v(e,u,c),v(e,c,k),L(c,k,n),u=c,g=[],p=[],a=u.next;continue}if((c.f&V)!==0&&(ce(c),s&&(c.nodes?.a?.unfix(),(m??=new Set).delete(c))),c!==a){if(f!==void 0&&f.has(c)){if(g.length<p.length){var S=p[0],b;u=S.prev;var I=g[0],A=g[g.length-1];for(b=0;b<g.length;b+=1)L(g[b],S,n);for(b=0;b<p.length;b+=1)f.delete(p[b]);v(e,I.prev,A.next),v(e,u,I),v(e,A,S),a=S,u=A,d-=1,g=[],p=[]}else f.delete(c),L(c,a,n),v(e,c.prev,c.next),v(e,c,u===null?e.effect.first:u.next),v(e,u,c),u=c;continue}for(g=[],p=[];a!==null&&a!==c;)(f??=new Set).add(a),p.push(a),a=a.next;if(a===null)continue}(c.f&_)===0&&g.push(c),u=c,a=c.next}if(e.outrogroups!==null){for(const y of e.outrogroups)y.pending.size===0&&(j(G(y.done)),e.outrogroups?.delete(y));e.outrogroups.size===0&&(e.outrogroups=null)}if(a!==null||f!==void 0){var h=[];if(f!==void 0)for(c of f)(c.f&V)===0&&h.push(c);for(;a!==null;)(a.f&V)===0&&a!==e.fallback&&h.push(a),a=a.next;var D=h.length;if(D>0){var B=(o&le)!==0&&r===0?n:null;if(s){for(d=0;d<D;d+=1)h[d].nodes?.a?.measure();for(d=0;d<D;d+=1)h[d].nodes?.a?.fix()}Fe(e,h,B)}}s&&Oe(()=>{if(m!==void 0)for(c of m)c.nodes?.a?.apply()})}function We(e,t,n,o,i,s,r,l){var a=(r&Ce)!==0?(r&Le)===0?Ae(n,!1,!1):te(n):null,f=(r&xe)!==0?te(i):null;return{v:a,i:f,e:Y(()=>(s(t,a??n,f??i,l),()=>{e.delete(o)}))}}function L(e,t,n){if(e.nodes)for(var o=e.nodes.start,i=e.nodes.end,s=t&&(t.f&_)===0?t.nodes.start:n;o!==null;){var r=Te(o);if(s.before(o),o===i)return;o=r}}function v(e,t,n){t===null?e.effect.first=n:t.next=n,n===null?e.effect.last=t:n.prev=t}const z=(e,t)=>t.some(n=>e instanceof n);let oe,re;function $e(){return oe||(oe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function He(){return re||(re=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const K=new WeakMap,W=new WeakMap,P=new WeakMap;function Ye(e){const t=new Promise((n,o)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",r)},s=()=>{n(M(e.result)),i()},r=()=>{o(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",r)});return P.set(t,e),t}function je(e){if(K.has(e))return;const t=new Promise((n,o)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",r),e.removeEventListener("abort",r)},s=()=>{n(),i()},r=()=>{o(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",r),e.addEventListener("abort",r)});K.set(e,t)}let U={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return K.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return M(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function de(e){U=e(U)}function ze(e){return He().includes(e)?function(...t){return e.apply(X(this),t),M(this.request)}:function(...t){return M(e.apply(X(this),t))}}function Ke(e){return typeof e=="function"?ze(e):(e instanceof IDBTransaction&&je(e),z(e,$e())?new Proxy(e,U):e)}function M(e){if(e instanceof IDBRequest)return Ye(e);if(W.has(e))return W.get(e);const t=Ke(e);return t!==e&&(W.set(e,t),P.set(t,e)),t}const X=e=>P.get(e);function Ue(e,t,{blocked:n,upgrade:o,blocking:i,terminated:s}={}){const r=indexedDB.open(e,t),l=M(r);return o&&r.addEventListener("upgradeneeded",a=>{o(M(r.result),a.oldVersion,a.newVersion,M(r.transaction),a)}),n&&r.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),l.then(a=>{s&&a.addEventListener("close",()=>s()),i&&a.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const Xe=["get","getKey","getAll","getAllKeys","count"],Ze=["put","add","delete","clear"],$=new Map;function ie(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if($.get(t))return $.get(t);const n=t.replace(/FromIndex$/,""),o=t!==n,i=Ze.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(i||Xe.includes(n)))return;const s=async function(r,...l){const a=this.transaction(r,i?"readwrite":"readonly");let f=a.store;return o&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),i&&a.done]))[0]};return $.set(t,s),s}de(e=>({...e,get:(t,n,o)=>ie(t,n)||e.get(t,n,o),has:(t,n)=>!!ie(t,n)||e.has(t,n)}));const Ge=["continue","continuePrimaryKey","advance"],se={},Z=new WeakMap,fe=new WeakMap,Je={get(e,t){if(!Ge.includes(t))return e[t];let n=se[t];return n||(n=se[t]=function(...o){Z.set(this,fe.get(this)[t](...o))}),n}};async function*qe(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const n=new Proxy(t,Je);for(fe.set(n,t),P.set(n,X(t));t;)yield n,t=await(Z.get(n)||t.continue()),Z.delete(n)}function ae(e,t){return t===Symbol.asyncIterator&&z(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&z(e,[IDBIndex,IDBObjectStore])}de(e=>({...e,get(t,n,o){return ae(t,n)?qe:e.get(t,n,o)},has(t,n){return ae(t,n)||e.has(t,n)}}));const T="activity-tracker",Qe=3;let H,N;function J(){return H||(H=Ue(T,Qe,{upgrade(e,t,n,o){if(!e.objectStoreNames.contains("dayLogs")){e.createObjectStore("dayLogs",{keyPath:"date"}).createIndex("by-updatedAt","updatedAt");return}const i=o.objectStore("dayLogs");i.indexNames.contains("by-updatedAt")||i.createIndex("by-updatedAt","updatedAt")},blocked(){console.warn(`IndexedDB upgrade blocked for ${T}. Close other tabs/windows.`)},blocking(){console.warn(`IndexedDB connection is blocking a newer version for ${T}. Closing.`),N?.close()},terminated(){console.warn(`IndexedDB connection terminated unexpectedly for ${T}.`)}}).then(e=>(N=e,N.onversionchange=()=>{N?.close()},e))),H}async function lt(e){const t=await J(),n=await t.get("dayLogs",e.date),o=Date.now(),i={...e,createdAt:n?.createdAt??o,updatedAt:o};return await t.put("dayLogs",i),i}async function dt(e){return(await J()).get("dayLogs",e)}async function ft(e=200){const n=(await J()).transaction("dayLogs","readonly"),i=await n.store.index("by-updatedAt").getAll(void 0,e);return await n.done,i.slice().sort((s,r)=>r.updatedAt-s.updatedAt)}function gt(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${o}`}function et(e){const t=new Date(e);t.setHours(0,0,0,0);const n=t.getDay();return t.setDate(t.getDate()-n),t}function pt(e){const[t,n,o]=e.split("-").map(Number),i=new Date(t,n-1,o),s=et(i),r=s.getFullYear(),l=String(s.getMonth()+1).padStart(2,"0"),a=String(s.getDate()).padStart(2,"0");return`${r}-${l}-${a}`}const tt=63,nt=45,ge=[{key:"mobility_lower_body_limber_11",label:"Lower body mobility (Limber 11)",category:"mobility",points:3,group:"Mobility"},{key:"mobility_upper_body_simple_6",label:"Upper body mobility (Simple 6)",category:"mobility",points:3,group:"Mobility"},{key:"mobility_lower_back_stretches",label:"Lower back stretches",category:"mobility",points:2,group:"Mobility"},{key:"conditioning_jumps_throws",label:"Jumps & throws",category:"conditioning",points:3,group:"Conditioning"},{key:"conditioning_easy",label:"Easy conditioning",category:"conditioning",points:5,group:"Conditioning",repeatable:!0,durationMinutes:15},{key:"conditioning_medium",label:"Medium conditioning",category:"conditioning",points:7,group:"Conditioning",repeatable:!0,durationMinutes:10},{key:"conditioning_hard",label:"Hard conditioning",category:"conditioning",points:8,group:"Conditioning",repeatable:!0,durationMinutes:5},{key:"strength_push",label:"Push",category:"strength",points:7,group:"Strength"},{key:"strength_pull",label:"Pull",category:"strength",points:7,group:"Strength"},{key:"strength_legs",label:"Legs",category:"strength",points:10,group:"Strength"},{key:"strength_abs",label:"Abs",category:"strength",points:5,group:"Strength"},{key:"strength_compression",label:"Compression",category:"strength",points:3,group:"Strength"},{key:"nutrition_omad",label:"OMAD",category:"nutrition",points:8,group:"Nutrition"},{key:"nutrition_no_carbs",label:"No carbs",category:"nutrition",points:10,group:"Nutrition"},{key:"nutrition_protein_goal",label:"Protein goal",category:"nutrition",points:3,group:"Nutrition"},{key:"nutrition_fat_goal",label:"Fat goal",category:"nutrition",points:5,group:"Nutrition"},{key:"nutrition_water_goal",label:"Water goal",category:"nutrition",points:2,group:"Nutrition"},{key:"misc_wake_up_early",label:"Wake up early",category:"miscellaneous",points:8,group:"Miscellaneous"},{key:"misc_exercise_immediately",label:"Exercise immediately after waking up",category:"miscellaneous",points:6,group:"Miscellaneous"},{key:"misc_cold_shower",label:"Cold shower for one minute",category:"miscellaneous",points:3,group:"Miscellaneous"}];function pe(){return new Map(ge.map(e=>[e.key,e.points]))}function ye(){return new Map(ge.map(e=>[e.key,e.category]))}function ot(e){const t={mobility:0,conditioning:0,strength:0,nutrition:0,miscellaneous:0},n=pe(),o=ye();for(const[i,s]of Object.entries(e.completed)){if(!s)continue;const r=o.get(i);r&&(t[r]+=n.get(i)??0)}return t}function rt(e){const t={mobility:0,conditioning:0,strength:0,nutrition:0,miscellaneous:0},n=pe(),o=ye();for(const[i,s]of Object.entries(e.counts)){const r=Number.isFinite(s)?Math.max(0,Math.floor(s)):0;if(r<=0)continue;const l=o.get(i);l&&(t[l]+=(n.get(i)??0)*r)}return t}function it(e,t){const n=t?.deload??!1,o=!!e.completed.mobility_lower_body_limber_11||!!e.completed.mobility_upper_body_simple_6,i=n?!!e.completed.strength_push||!!e.completed.strength_pull||!!e.completed.strength_legs:(!!e.completed.strength_push||!!e.completed.strength_pull)&&!!e.completed.strength_legs,s=n?(e.counts.conditioning_easy??0)>0:(e.counts.conditioning_easy??0)>0||(e.counts.conditioning_medium??0)>0||(e.counts.conditioning_hard??0)>0;return o&&i&&s}function st(e,t){return t?e<37?"okay":e<47?"solid":e<53?"great":e<60?"amazing":"above_and_beyond":"missed"}function at(e){return e<12?"missed":e<22?"okay":e<32?"solid":"great"}function yt(e,t){const n=ot(e),o=rt(e),i={mobility:n.mobility+o.mobility,conditioning:n.conditioning+o.conditioning,strength:n.strength+o.strength,nutrition:n.nutrition+o.nutrition,miscellaneous:n.miscellaneous+o.miscellaneous},s=i.mobility+i.conditioning+i.strength,r=i.nutrition+i.miscellaneous,l=Math.min(s,tt),a=Math.min(r,nt),f=l+a,u=it(e,t),m=u,g=st(l,u),p=at(a);return{rawByCategory:i,cappedTrainingPoints:l,cappedLifestylePoints:a,totalPoints:f,medMet:u,dailyWin:m,trainingRating:g,lifestyleRating:p}}export{ge as A,dt as a,yt as c,ut as e,pt as g,gt as i,ft as l,et as s,lt as u};
