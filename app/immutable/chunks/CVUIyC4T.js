import{c as k}from"./Dr3jCEEA.js";function p(a){const o=a.slice().sort((e,s)=>e.date>s.date?1:-1);let t=0;for(let e=o.length-1;e>=0&&k(o[e]).dailyWin;e--)t+=1;return t}function W(a){const o=a.slice().sort((e,s)=>e.weekStart>s.weekStart?1:-1);let t=0;for(let e=o.length-1;e>=0;e--){const s=o[e],d=s.trainingPoints>=175,i=s.missedDays<2;if(!d||!i)break;t+=1}return t}function f(a){return a.length===0?0:a.reduce((o,t)=>o+t,0)/a.length}function y(a,o,t){const e=new Set;(()=>{let r=0;for(const l of t.priorWeeks.slice().sort((m,n)=>m.weekStart>n.weekStart?1:-1))l.deload?r=0:r+=1;return r})()>=3&&e.add("scheduled"),o.reduce((r,l)=>r+(l.readiness==="fatigued"?1:0),0)>=4&&e.add("fatigued_days");const i=t.priorWeeks.slice().sort((r,l)=>r.weekStart>l.weekStart?1:-1).slice(-3);return i.length>=3&&f(i.map(r=>r.trainingPoints))>350&&e.add("high_average"),{deload:e.size>0,reasons:Array.from(e)}}function D(a){const o=a.slice().sort((e,s)=>e.weekStart>s.weekStart?1:-1),t=[];for(const e of o){const s=t.map(r=>({weekStart:r.weekStart,days:r.days,deload:r.summary.deload,trainingPoints:r.summary.trainingPoints})),d=y(e.weekStart,e.days,{priorWeeks:s}),i=S(e.weekStart,e.days,{deload:d.deload,deloadReasons:d.reasons});t.push({weekStart:e.weekStart,days:e.days,summary:i})}return t.map(e=>e.summary).sort((e,s)=>e.weekStart>s.weekStart?-1:1)}const u={solid:259,great:329,amazing:371,above:420};function g(a,o){const t=o?{solid:u.solid*.5,great:u.great*.5,amazing:u.amazing*.5,above:u.above*.5}:u;return a>=t.above?"above_and_beyond":a>=t.amazing?"amazing":a>=t.great?"great":a>=t.solid?"solid":"minimum"}function S(a,o,t){const e=t?.deload??!1,s=t?.deloadReasons??[],d=o.map(n=>({day:n,scores:k(n,{deload:e})})),i=d.reduce((n,c)=>n+c.scores.cappedTrainingPoints,0),r=d.reduce((n,c)=>n+(c.scores.dailyWin?1:0),0),l=d.reduce((n,c)=>n+(c.scores.trainingRating==="missed"?1:0),0),m=d.reduce((n,c)=>n+(c.day.readiness==="fatigued"?1:0),0);return{weekStart:a,deload:e,deloadReasons:s,trainingPoints:i,weeklyRating:g(i,e),wins:r,missedDays:l,fatiguedDays:m,days:d.sort((n,c)=>n.day.date>c.day.date?-1:1)}}export{p as a,W as b,D as c};
