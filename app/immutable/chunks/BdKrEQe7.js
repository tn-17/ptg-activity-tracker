import{c as k}from"./BFnZqG6b.js";function p(a){const o=a.slice().sort((e,s)=>e.date>s.date?1:-1);let t=0;for(let e=o.length-1;e>=0&&k(o[e]).dailyWin;e--)t+=1;return t}function W(a){const o=a.slice().sort((e,s)=>e.weekStart>s.weekStart?1:-1);let t=0;for(let e=o.length-1;e>=0;e--){const s=o[e],i=s.trainingPoints>=175,d=s.missedDays<2;if(!i||!d)break;t+=1}return t}function f(a){return a.length===0?0:a.reduce((o,t)=>o+t,0)/a.length}function y(a,o,t){const e=new Set;(()=>{let r=0;for(const m of t.priorWeeks.slice().sort((l,n)=>l.weekStart>n.weekStart?1:-1))m.deload?r=0:r+=1;return r})()>=3&&e.add("scheduled"),o.reduce((r,m)=>r+(m.readiness==="fatigued"?1:0),0)>=4&&e.add("fatigued_days");const d=t.priorWeeks.slice().sort((r,m)=>r.weekStart>m.weekStart?1:-1).slice(-3);return d.length>=3&&f(d.map(r=>r.trainingPoints))>350&&e.add("high_average"),{deload:e.size>0,reasons:Array.from(e)}}function v(a){const o=a.slice().sort((e,s)=>e.weekStart>s.weekStart?1:-1),t=[];for(const e of o){const s=t.map(r=>({weekStart:r.weekStart,days:r.days,deload:r.summary.deload,trainingPoints:r.summary.trainingPoints})),i=y(e.weekStart,e.days,{priorWeeks:s}),d=S(e.weekStart,e.days,{deload:i.deload,deloadReasons:i.reasons});t.push({weekStart:e.weekStart,days:e.days,summary:d})}return t.map(e=>e.summary).sort((e,s)=>e.weekStart>s.weekStart?-1:1)}const u={minimum:175,solid:259,great:329,amazing:371,above:420};function g(a,o){const t=o?{minimum:u.minimum*.5,solid:u.solid*.5,great:u.great*.5,amazing:u.amazing*.5,above:u.above*.5}:u;return a>=t.above?"above_and_beyond":a>=t.amazing?"amazing":a>=t.great?"great":a>=t.solid?"solid":a>=t.minimum?"minimum":"needs_improvement"}function S(a,o,t){const e=t?.deload??!1,s=t?.deloadReasons??[],i=o.map(n=>({day:n,scores:k(n,{deload:e})})),d=i.reduce((n,c)=>n+c.scores.cappedTrainingPoints,0),r=i.reduce((n,c)=>n+(c.scores.dailyWin?1:0),0),m=i.reduce((n,c)=>n+(c.scores.trainingRating==="missed"?1:0),0),l=i.reduce((n,c)=>n+(c.day.readiness==="fatigued"?1:0),0);return{weekStart:a,deload:e,deloadReasons:s,trainingPoints:d,weeklyRating:g(d,e),wins:r,missedDays:m,fatiguedDays:l,days:i.sort((n,c)=>n.day.date>c.day.date?-1:1)}}export{p as a,W as b,v as c};
