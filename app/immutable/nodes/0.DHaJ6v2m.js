import{f as T,a as h,t as q,c as fe}from"../chunks/CJ8-a8LZ.js";import{a1 as ee,a3 as de,Y as me,b1 as ve,x as B,av as ue,ak as pe,ax as V,a8 as z,a7 as Q,_ as he,p as te,o as ae,b2 as ge,R as ye,T as we,J as ne,a as se,s as $,v as K,K as x,H as g,O as P,c as m,I as C,M as _e,aL as be,b3 as ke}from"../chunks/BTsEBZ5s.js";import{B as Ee,i as O}from"../chunks/vtm1fa-L.js";import{s as R}from"../chunks/BHjAvajJ.js";import{i as re}from"../chunks/BRPbGBdo.js";import{e as N}from"../chunks/N6BBi94v.js";import{s as G,p as Re}from"../chunks/BnTiqbqL.js";import{s as oe,a as J}from"../chunks/Cqhsq0cz.js";import{r as Y}from"../chunks/ClBUTWgw.js";import{_ as Te}from"../chunks/PPVm8Dsz.js";import{w as X}from"../chunks/C7vlJ78E.js";import{b as Z}from"../chunks/D3y6TuXk.js";function Le(e,v,...i){var l=new Ee(e);ee(()=>{const o=v()??null;l.ensure(o,o&&(t=>o(t,...i)))},de)}function Se(e,v){let i=null,l=B;var o;if(B){i=he;for(var t=ue(document.head);t!==null&&(t.nodeType!==pe||t.data!==e);)t=V(t);if(t===null)z(!1);else{var a=V(t);t.remove(),Q(a)}}B||(o=document.head.appendChild(me()));try{ee(()=>v(o),ve)}finally{l&&(z(!0),Q(i))}}const $e="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='107'%20height='128'%20viewBox='0%200%20107%20128'%3e%3ctitle%3esvelte-logo%3c/title%3e%3cpath%20d='M94.157%2022.819c-10.4-14.885-30.94-19.297-45.792-9.835L22.282%2029.608A29.92%2029.92%200%200%200%208.764%2049.65a31.5%2031.5%200%200%200%203.108%2020.231%2030%2030%200%200%200-4.477%2011.183%2031.9%2031.9%200%200%200%205.448%2024.116c10.402%2014.887%2030.942%2019.297%2045.791%209.835l26.083-16.624A29.92%2029.92%200%200%200%2098.235%2078.35a31.53%2031.53%200%200%200-3.105-20.232%2030%2030%200%200%200%204.474-11.182%2031.88%2031.88%200%200%200-5.447-24.116'%20style='fill:%23ff3e00'/%3e%3cpath%20d='M45.817%20106.582a20.72%2020.72%200%200%201-22.237-8.243%2019.17%2019.17%200%200%201-3.277-14.503%2018%2018%200%200%201%20.624-2.435l.49-1.498%201.337.981a33.6%2033.6%200%200%200%2010.203%205.098l.97.294-.09.968a5.85%205.85%200%200%200%201.052%203.878%206.24%206.24%200%200%200%206.695%202.485%205.8%205.8%200%200%200%201.603-.704L69.27%2076.28a5.43%205.43%200%200%200%202.45-3.631%205.8%205.8%200%200%200-.987-4.371%206.24%206.24%200%200%200-6.698-2.487%205.7%205.7%200%200%200-1.6.704l-9.953%206.345a19%2019%200%200%201-5.296%202.326%2020.72%2020.72%200%200%201-22.237-8.243%2019.17%2019.17%200%200%201-3.277-14.502%2017.99%2017.99%200%200%201%208.13-12.052l26.081-16.623a19%2019%200%200%201%205.3-2.329%2020.72%2020.72%200%200%201%2022.237%208.243%2019.17%2019.17%200%200%201%203.277%2014.503%2018%2018%200%200%201-.624%202.435l-.49%201.498-1.337-.98a33.6%2033.6%200%200%200-10.203-5.1l-.97-.294.09-.968a5.86%205.86%200%200%200-1.052-3.878%206.24%206.24%200%200%200-6.696-2.485%205.8%205.8%200%200%200-1.602.704L37.73%2051.72a5.42%205.42%200%200%200-2.449%203.63%205.79%205.79%200%200%200%20.986%204.372%206.24%206.24%200%200%200%206.698%202.486%205.8%205.8%200%200%200%201.602-.704l9.952-6.342a19%2019%200%200%201%205.295-2.328%2020.72%2020.72%200%200%201%2022.237%208.242%2019.17%2019.17%200%200%201%203.277%2014.503%2018%2018%200%200%201-8.13%2012.053l-26.081%2016.622a19%2019%200%200%201-5.3%202.328'%20style='fill:%23fff'/%3e%3c/svg%3e",ie="theme-preference";function xe(){if(typeof window>"u")return"system";const e=window.localStorage.getItem(ie);return e==="light"||e==="dark"||e==="system"?e:"system"}function Pe(e){window.localStorage.setItem(ie,e)}function je(e){return e==="light"||e==="dark"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function We(e){document.documentElement.dataset.theme=e,document.documentElement.style.colorScheme=e}var Me=T('<nav class="nav svelte-1h32yp1"><div class="links svelte-1h32yp1"><a>Log</a> <a>History</a> <a>Week</a></div> <button type="button" class="theme svelte-1h32yp1"><!></button></nav>');function Ce(e,v){te(v,!1);const i=()=>J(Re,"$page",l),[l,o]=oe(),t=K();let a=K("system"),s="light";function c(){s=je(m(a)),We(s)}function u(){$(a,m(a)==="system"?"light":m(a)==="light"?"dark":"system"),Pe(m(a)),c()}let f=null;const b=()=>{m(a)==="system"&&c()};ae(()=>{$(a,xe()),f=window.matchMedia("(prefers-color-scheme: dark)"),f.addEventListener("change",b),c()}),ge(()=>{f?.removeEventListener("change",b)});const r=Y("/log"),k=Y("/history"),w=Y("/week");ye(()=>i(),()=>{$(t,String(i().url.pathname))}),we(),re();var j=Me(),W=x(j),A=x(W);let D;var F=g(A,2);let n;var d=g(F,2);let _;P(W);var p=g(W,2),H=x(p);{var E=y=>{var S=q("System");h(y,S)},L=y=>{var S=fe(),I=C(S);{var le=M=>{var U=q("Light");h(M,U)},ce=M=>{var U=q("Dark");h(M,U)};O(I,M=>{m(a)==="light"?M(le):M(ce,!1)},!0)}h(y,S)};O(H,y=>{m(a)==="system"?y(E):y(L,!1)})}P(p),P(j),ne(()=>{R(A,"href",r),D=G(A,1,"svelte-1h32yp1",null,D,{active:m(t)==="/log"}),R(F,"href",k),n=G(F,1,"svelte-1h32yp1",null,n,{active:m(t)==="/history"}),R(d,"href",w),_=G(d,1,"svelte-1h32yp1",null,_,{active:m(t)==="/week"}),R(p,"aria-label",`Theme: ${m(a)}. Click to change.`),R(p,"title",`Theme: ${m(a)}`)}),N("click",p,u),h(e,j),se(),o()}function Ae(e={}){const{immediate:v=!1,onNeedRefresh:i,onOfflineReady:l,onRegistered:o,onRegisteredSW:t,onRegisterError:a}=e;let s,c,u;const f=async(r=!0)=>{await c,u?.()};async function b(){if("serviceWorker"in navigator){if(s=await Te(async()=>{const{Workbox:r}=await import("../chunks/BIl4cyR9.js");return{Workbox:r}},[],import.meta.url).then(({Workbox:r})=>new r("./sw.js",{scope:"./",type:"classic"})).catch(r=>{a?.(r)}),!s)return;u=()=>{s?.messageSkipWaiting()};{let r=!1;const k=()=>{r=!0,s?.addEventListener("controlling",w=>{w.isUpdate&&window.location.reload()}),i?.()};s.addEventListener("installed",w=>{typeof w.isUpdate>"u"?typeof w.isExternal<"u"&&w.isExternal?k():!r&&l?.():w.isUpdate||l?.()}),s.addEventListener("waiting",k)}s.register({immediate:v}).then(r=>{t?t("./sw.js",r):o?.(r)}).catch(r=>{a?.(r)})}}return c=b(),f}function Fe(e={}){const{immediate:v=!0,onNeedRefresh:i,onOfflineReady:l,onRegistered:o,onRegisteredSW:t,onRegisterError:a}=e,s=X(!1),c=X(!1),u=Ae({immediate:v,onOfflineReady(){c.set(!0),l?.()},onNeedRefresh(){s.set(!0),i?.()},onRegistered:o,onRegisteredSW:t,onRegisterError:a});return{needRefresh:s,offlineReady:c,updateServiceWorker:u}}var Ne=T('<div class="toast svelte-1bgylkj" role="status" aria-live="polite"><span>Ready to work offline.</span> <button type="button" class="svelte-1bgylkj">Dismiss</button></div>'),Oe=T('<span>You are offline. Reconnect to update.</span> <button type="button" class="svelte-1bgylkj">Dismiss</button>',1),De=T('<span>Update available.</span> <div class="actions svelte-1bgylkj"><button type="button" class="svelte-1bgylkj">Reload</button> <button type="button" class="secondary svelte-1bgylkj">Later</button></div>',1),He=T('<div class="toast svelte-1bgylkj" role="status" aria-live="polite"><!></div>'),Ie=T("<!> <!>",1);function Ue(e,v){te(v,!1);const i=()=>J(s,"$needRefresh",o),l=()=>J(a,"$offlineReady",o),[o,t]=oe(),{offlineReady:a,needRefresh:s,updateServiceWorker:c}=Fe();let u=!1,f=K(!1);function b(n){const d=n instanceof Error?n.message:typeof n=="string"?n:typeof n=="object"&&n!==null&&"message"in n?String(n.message):"";return/Failed to fetch dynamically imported module|Importing a module script failed|Loading chunk .* failed/i.test(d)}async function r(n){if(!u&&b(n)){if(u=!0,!navigator.onLine){s.set(!0),$(f,!0),u=!1;return}try{await c(!0)}finally{location.reload()}}}ae(()=>{const n=p=>{r(p.reason)},d=p=>{r(p.error??p.message)},_=()=>{m(f)&&i()&&$(f,!1)};return window.addEventListener("unhandledrejection",n),window.addEventListener("error",d),window.addEventListener("online",_),()=>{window.removeEventListener("unhandledrejection",n),window.removeEventListener("error",d),window.removeEventListener("online",_)}});function k(){a.set(!1),s.set(!1),$(f,!1)}async function w(){$(f,!1),a.set(!1),s.set(!1),await c(!0)}re();var j=Ie(),W=C(j);{var A=n=>{var d=Ne(),_=g(x(d),2);P(d),N("click",_,k),h(n,d)};O(W,n=>{l()&&n(A)})}var D=g(W,2);{var F=n=>{var d=He(),_=x(d);{var p=E=>{var L=Oe(),y=g(C(L),2);N("click",y,k),h(E,L)},H=E=>{var L=De(),y=g(C(L),2),S=x(y),I=g(S,2);P(y),N("click",S,w),N("click",I,k),h(E,L)};O(_,E=>{m(f)?E(p):E(H,!1)})}P(d),h(n,d)};O(D,n=>{i()&&n(F)})}h(e,j),se(),t()}var qe=T('<link rel="icon"/> <link rel="manifest"/> <meta name="theme-color" content="#111827"/> <meta name="mobile-web-app-capable" content="yes"/> <meta name="apple-mobile-web-app-capable" content="yes"/> <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/> <meta name="apple-mobile-web-app-title" content="PTG Activity Tracker"/> <link rel="apple-touch-icon"/> <meta name="viewport" content="width=device-width, initial-scale=1"/>',1),Be=T('<!> <!> <main class="main svelte-12qhfyh"><!></main>',1);function nt(e,v){var i=Be();Se("12qhfyh",s=>{var c=qe(),u=C(c),f=g(u,2),b=g(f,12);_e(2),ne(()=>{R(u,"href",$e),R(f,"href",`${Z??""}/manifest.webmanifest`),R(b,"href",`${Z??""}/icons/apple-touch-icon.png`)}),be(()=>{ke.title="PTG Activity Tracker"}),h(s,c)});var l=C(i);Ce(l,{});var o=g(l,2);Ue(o,{});var t=g(o,2),a=x(t);Le(a,()=>v.children),P(t),h(e,i)}export{nt as component};
